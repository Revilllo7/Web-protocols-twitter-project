<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Twitter</title>
        <link rel="stylesheet" href="../styles.css">
    </head>
    <body>
        <nav>
            <div id="logo">
                <img src="../assets/logo.png" alt="logo">
                <p>They killed the bird.</p>
            </div>
            <div id="nav-options">
                <a href="profile.html">Profile</a>
                <a href="main.html">Home</a>
                <a href="../login.html">Account</a>
                <input type="text" id="search-bar" placeholder="Search...">
            </div>
        </nav>

        <main id="root">
            <div class="panel">
                <div id="greeting">  
                </div>
                <!-- JS welcome $username message here -->
                
                <div class="post-section">
                    <textarea id="post-text" placeholder="What's on your mind?"></textarea>
                    <input id="hashtags" placeholder="Enter hashtags (comma-separated)">
                    <button type="button" onclick="addPost()">Post</button>
                </div>
        
                <div class="hashtags-section">
                    <h2>Top Hashtags</h2>
                    <ul id="top-hashtags"></ul>
                </div>
            </div>

            <section class="posts-section">
                <!-- Posts will be dynamically inserted here -->
            </section>

            <!-- Messages Section with Rooms -->
            <section class="messages">
                <div id="message-box">
                    <h2>Messages</h2>

                    <!-- Room buttons -->
                    <div>
                        <button type="button" class="room-button" data-room="room1">Room 1</button>
                        <button type="button" class="room-button" data-room="room2">Room 2</button>
                        <button type="button" class="room-button" data-room="room3">Room 3</button>
                        <button type="button" class="room-button" data-room="room4">Room 4</button>
                    </div>

                    <!-- Message input -->
                    <input type="text" id="message-input" placeholder="Type a message">
                    <button type="button" id="send-message-button" onclick="sendMessage()">Send</button>

                    <!-- Rooms -->
                    <div id="room-1" class="message-container">
                        <div class="message-list"></div>
                    </div>
                    <div id="room-2" class="message-container">
                        <div class="message-list"></div>
                    </div>
                    <div id="room-3" class="message-container">
                        <div class="message-list"></div>
                    </div>
                    <div id="room-4" class="message-container">
                        <div class="message-list"></div>
                    </div>
                    <style>
                        .message-container {
                            background-color: #f1d36f3f;
                            border: 1px solid #000;
                        }
                        .message-list {
                            background-color: #f1d36f00;
                        }
                    </style>
                    
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; Icarus - They killed the bird</p>
            <div id="footer-links">
                <a href="./about_us.html">üê¶About usüê¶</a>
                <strong>/</strong>
                <a href="./help.html">Help</a>
                <strong>/</strong>
                <a href="./contact.html">üê¶Contactüê¶</a>  
            </div>          
        </footer>
        
        <script src="./scripts/main.js"></script>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
            // JavaScript for Room Switching
            const roomButtons = document.querySelectorAll(".room-button");
        
            // Function to switch rooms
            function switchRoom(roomId) {
                // Hide all rooms
                const rooms = document.querySelectorAll(".message-container");
                rooms.forEach(room => room.style.display = "none");
        
                // Remove 'active-room' class from all rooms
                rooms.forEach(room => room.classList.remove("active-room"));
        
                // Correctly select the room by its ID
                const newRoom = document.getElementById(`room-${roomId}`); // Room should have room-ID (e.g., room-1)
        
                if (newRoom) {  // Check if the room element exists
                newRoom.style.display = "block";  // Show the room
                newRoom.classList.add("active-room");  // Add active class to the room
                } else {
                console.error(`Room with id 'room-${roomId}' not found.`);
                }
            }
        
            // Add event listeners for each room button
            roomButtons.forEach(button => {
                button.addEventListener("click", () => {
                let roomId = button.getAttribute("data-room");  // Get the room ID directly (room1, room2, room3, room4)
                roomId = roomId.replace('room', ''); // Extract the number from the room ID
                switchRoom(roomId);  // Pass the roomId directly to switchRoom
                });
            });
            });
        </script>
    </body>
</html>